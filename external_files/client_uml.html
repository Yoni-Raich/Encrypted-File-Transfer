<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Client-side UML Diagram</title>
</head>
<body>
    <h1>Client-side UML Diagram</h1>
    <pre class="plantuml">
@startuml

skinparam class {
    BackgroundColor LightGreen
    ArrowColor Black
    BorderColor DarkGreen
}

package "Client-side" {
    class Client {
        - server_url: String
        - auth_token: String
        + connect(): void
        + disconnect(): void
        + send_request(request: Request): Response
        + login(username: String, password: String): bool
        + logout(): void
    }

    class Request {
        - method: String
        - path: String
        - headers: Map<String, String>
        - body: String
        + set_method(method: String): void
        + set_path(path: String): void
        + set_header(name: String, value: String): void
        + set_body(body: String): void
        + to_string(): String
    }

    class Response {
        - status_code: int
        - headers: Map<String, String>
        - body: String
        + get_status_code(): int
        + get_header(name: String): String
        + get_body(): String
        + parse_json(): Map<String, Object>
    }

    class UI {
        - current_screen: Screen
        + render_login_screen(): void
        + render_main_screen(): void
        + render_chat_screen(): void
        + show_error(message: String): void
        + show_success(message: String): void
        + update_chat(messages: List<Message>): void
    }

    class DataManager {
        - cache: Map<String, Object>
        + get_data(key: String): Object
        + set_data(key: String, value: Object): void
        + clear_cache(): void
        + is_cached(key: String): bool
    }

    class APIService {
        - client: Client
        + get_user_profile(): UserProfile
        + update_user_profile(profile: UserProfile): void
        + get_messages(): List<Message>
        + send_message(message: Message): void
        + get_user_list(): List<User>
    }

    class UserProfile {
        - username: String
        - email: String
        - avatar_url: String
        + get_username(): String
        + get_email(): String
        + get_avatar_url(): String
        + set_email(email: String): void
        + set_avatar_url(url: String): void
    }

    class Message {
        - id: int
        - sender: String
        - content: String
        - timestamp: DateTime
        + get_id(): int
        + get_sender(): String
        + get_content(): String
        + get_timestamp(): DateTime
        + to_string(): String
    }

    class ChatManager {
        - active_chats: Map<String, List<Message>>
        + get_chat_history(user: String): List<Message>
        + add_message(user: String, message: Message): void
        + clear_chat(user: String): void
    }

    Client "1" --> "1" APIService : uses
    Client "1" --> "*" Request : creates
    Client "1" --> "*" Response : receives
    Client "1" --> "1" UI : updates
    Client "1" --> "1" DataManager : uses
    APIService "1" --> "1" UserProfile : manages
    APIService "1" --> "*" Message : handles
    UI "1" --> "1" UserProfile : displays
    UI "1" --> "*" Message : displays
    ChatManager "1" --> "*" Message : manages
    DataManager "1" --> "1" ChatManager : caches
}

@enduml
    </pre>
</body>
</html>